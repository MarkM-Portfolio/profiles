<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!-- ***************************************************************** -->
<!--                                                                   -->
<!-- IBM Confidential                                                  -->
<!--                                                                   -->
<!-- OCO Source Materials                                              -->
<!--                                                                   -->
<!-- Copyright IBM Corp. 2006, 2014                                    -->
<!--                                                                   -->
<!-- The source code for this program is not published or otherwise    -->
<!-- divested of its trade secrets, irrespective of what has been      -->
<!-- deposited with the U.S. Copyright Office.                         -->
<!--                                                                   -->
<!-- ***************************************************************** -->

<sqlMap namespace="Department">

	<typeAlias alias="department"
		type="com.ibm.lconn.profiles.data.codes.Department" />
		
	<resultMap id="DepartmentResult" class="java.util.HashMap">
		<result property="codeId" column="PROF_DEPARTMENT_CODE" />
		<result property="departmentTitle" column="PROF_DEPARTMENT_TITLE" />
		<result property="tenantKey" column="TENANT_KEY" />
	</resultMap>

	<select id="get" resultMap="DepartmentResult" parameterClass="map">
		select PROF_DEPARTMENT_CODE, PROF_DEPARTMENT_TITLE, TENANT_KEY from EMPINST.DEPARTMENT
		where PROF_DEPARTMENT_CODE=#codeId#
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</select>

	<select id="getAll" resultMap="DepartmentResult" parameterClass="map">
		select PROF_DEPARTMENT_CODE, PROF_DEPARTMENT_TITLE, TENANT_KEY from EMPINST.DEPARTMENT
		where 1=1
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</select>

	<insert id="create" parameterClass="department">
		insert into EMPINST.DEPARTMENT (PROF_DEPARTMENT_CODE, PROF_DEPARTMENT_TITLE, TENANT_KEY)
		values (#codeId#, #departmentTitle#, #dbTenantKey#)
	</insert>
	
	<update id="update" parameterClass="map">
		update EMPINST.DEPARTMENT
		set PROF_DEPARTMENT_TITLE = #code.departmentTitle#
		where PROF_DEPARTMENT_CODE = #code.codeId#
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</update>
	
	<delete id="delete" parameterClass="map">
		delete from EMPINST.DEPARTMENT
		where PROF_DEPARTMENT_CODE = #codeId#
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</delete>

</sqlMap>
