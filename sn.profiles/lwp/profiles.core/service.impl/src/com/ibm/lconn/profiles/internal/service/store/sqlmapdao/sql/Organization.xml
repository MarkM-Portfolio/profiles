<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!-- ***************************************************************** -->
<!--                                                                   -->
<!-- IBM Confidential                                                  -->
<!--                                                                   -->
<!-- OCO Source Materials                                              -->
<!--                                                                   -->
<!-- Copyright IBM Corp. 2006, 2014                                    -->
<!--                                                                   -->
<!-- The source code for this program is not published or otherwise    -->
<!-- divested of its trade secrets, irrespective of what has been      -->
<!-- deposited with the U.S. Copyright Office.                         -->
<!--                                                                   -->
<!-- ***************************************************************** -->

<sqlMap namespace="Organization">

	<typeAlias alias="organization"
		type="com.ibm.lconn.profiles.data.codes.Organization" />
		
	<resultMap id="OrganizationResult" class="java.util.HashMap">
		<result property="codeId" column="PROF_ORGANIZATION_CODE" />
		<result property="orgTitle" column="PROF_ORGANIZATION_TITLE" />
		<result property="tenantKey" column="TENANT_KEY" />
	</resultMap>

	<select id="get" resultMap="OrganizationResult" parameterClass="map">
		select PROF_ORGANIZATION_CODE, PROF_ORGANIZATION_TITLE, TENANT_KEY from EMPINST.ORGANIZATION
		where PROF_ORGANIZATION_CODE=#codeId#
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</select>

	<select id="getAll" resultMap="OrganizationResult" parameterClass="map">
		select PROF_ORGANIZATION_CODE, PROF_ORGANIZATION_TITLE, TENANT_KEY from EMPINST.ORGANIZATION
		where 1=1
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</select>
	
	<insert id="create" parameterClass="organization">
		insert into EMPINST.ORGANIZATION (PROF_ORGANIZATION_CODE, PROF_ORGANIZATION_TITLE, TENANT_KEY)
		values (#codeId#, #orgTitle#, #dbTenantKey#)
	</insert>
	
	<update id="update" parameterClass="map">
		update EMPINST.ORGANIZATION
		set PROF_ORGANIZATION_TITLE = #code.orgTitle#
		where PROF_ORGANIZATION_CODE = #code.codeId#
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</update>

	<delete id="delete" parameterClass="map">
		delete from EMPINST.ORGANIZATION
		where PROF_ORGANIZATION_CODE = #codeId#
		<include refid="Tenant.sql_WhereByTenantKey"/>
	</delete>
</sqlMap>
